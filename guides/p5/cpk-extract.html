<!doctype html>
<html>
<head>
<link rel='shortcut icon' href='../../favicon.png' type='image/x-icon'/ >
<meta charset="utf-8">
<title>Amicitia - P5 File Extraction Guide</title>
<link href="../../css/index.css" rel="stylesheet" type="text/css">
<link href="../../css/waves.css" rel="stylesheet" type="text/css">
<link href="../../css/guides.css" rel="stylesheet" type="text/css">
<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
</head>
<body>
<canvas id='bgCanvas'></canvas>
<script src="../../js/https://amicitiamods.jcink.net/.js"></script>
<div class="waves">
  <div class="wave wave_1"></div>
  <div class="wave wave_2"></div>
  <div class="wave wave_3"></div>
</div>
<div class="navigation">
 <i class="fas fa-home"></i> Home
 <a href="http://amicitia-team.tumblr.com"><i class="fas fa-edit"></i> Blog</a>
 <a href="http://amicitia-mods.boards.net/"><i class="fa fa-comment" aria-hidden="true"></i> Forum</a>
 <a href="https://amicitia.miraheze.org/wiki/Main_Page"><i class="fa fa-book" aria-hidden="true"></i> Wiki</a>
 <a href="https://amicitia.github.io/about"><i class="fa fa-info-circle" aria-hidden="true"></i> About</a>
 
</div>
<div class="logo"><center><a href="https://amicitia.github.io/"><img src="../../images/logo.svg" width="179" height="179"></a></center></div>

<div class="content"><a href="https://amicitia.github.io/index">Home</a> <i class="fa fa-angle-double-right" aria-hidden="true"></i>
 <a href="https://amicitia.github.io/guides">Guides</a> <i class="fa fa-angle-double-right" aria-hidden="true"></i>
 <a href="../p5">Persona 5 (PS3)</a> <i class="fa fa-angle-double-right" aria-hidden="true"></i> <b>Extracting Persona 5's CPKs</b>
 
 <b><h1>Extracting P5's CPK Files</h1></b>
 <table border="0" cellspacing="20" cellpadding="0" id="entry">
	<tr>
		<td><img src="https://i.imgur.com/IdITjGz.png"></td>
		<td id="left"><h2>What's a CPK?</h2>
			A <b>CPK file</b> is an archive made by Criware that contains the game's content. They can be obtained and extracted several ways, as well as repacked.
			<br>
			<br>In order to modify or swap the game's files, you need to use our <a href="https://amicitia.github.io/guides/p5/mod-cpk"><b>Persona 5 Mod Loader</b></a>
			and create a <span style="background-color: #CCE8FF">mod.cpk</span> that matches the structure of the game's original CPK files. 
			<br>But before you do that, the easiest way to understand the file structure is to first <b>extract the CPKs
			yourself and look through them</b>.
		</td>
	</tr>
</table>
</div>

<div class="content">
 <b><h1>Getting the CPK files from the game</h1></b>
 <table border="0" cellspacing="20" cellpadding="0" id="entry">
	<tr>
		<td>
			Persona 5 has 2 main CPKs, <span style="background-color: #CCE8FF">data.cpk</span> and <span style="background-color: #CCE8FF">ps3.cpk</span>. You can find them at
			the <span style="background-color: #CCE8FF">USRDIR</span> folder of the game's installation directory. After installing a <b>PKG</b> file on a Custom Firmware PS3
			or in the PS3 emulator RPCS3, this can be found at <span style="background-color: #CCE8FF">dev_hdd0\game\GAMEID</span>. Depending on your region, the Game ID is 
			NPEB02436 (Europe) or NPUB31848 (US).
			<br>
			<br>There also exists a <span style="background-color: #CCE8FF">cache.cpk</span> that is meant to speed up loading times on physical versions of the game by being copied
			to your system's hard drive. In the case of digital versions, it's useless and you may delete it without any impact whatsoever.
		</td>
		<td>
			<img src="https://i.imgur.com/goqgVfd.png">
		</td>
	<tr>
		<td><img src="https://i.imgur.com/87kBabP.png"></td>
		<td id="left">If you have downloaded the game's <b>PKG</b> file to your computer, another way of getting the CPK files
		is to extract it using <a href="https://amicitia.github.io/tools/p5#pkgview">a program called PKGview</a>. Run the EXE and locate your PKG file. Navigate to the <b>USRDIR</b> folder
		and right click and extract both <span style="background-color: #CCE8FF">ps3.cpk</span> and <span style="background-color: #CCE8FF">data.cpk</span>.
		</td>
	</tr>
</table>

</div>

<div class="content">
 
 <b><h1>Extracting the CPK contents</h1></b>
 <table border="0" cellspacing="20" cellpadding="0" id="entry">
 	<tr>
		<td>
			Next, you must follow these steps to get the files from each of your CPK archives. This process also works for <span style="background-color: #CCE8FF">mod.cpk</span> files that you may have downloaded or created in the past.
			<br><br>Download and extract <b><a href="https://cdn.discordapp.com/attachments/316238229948989450/396825846633070592/CriPakGUI.zip">CriPakGUI.zip</a></b>. Run <b>CriPakGUI.exe</b> and click the <b>Extract me!</b> button to browse for your CPK file. It will prompt you to choose a location for the extracted contents. Then sit back and wait for it to finish!
		</td>
		<td>
			<img src="https://i.imgur.com/wYEuTvc.png">
		</td>
</table>

</div>

<div class="content">
<table border="0" cellspacing="20" cellpadding="0" id="entry">
	<tr>
		<td><h2>Packing a CPK</h2>
			If you want to mod the game instead of just browsing its files, you can make your own CPK.
			<br><b>Important:</b> The contents of the directory you use to make your CPK <b>must
			retain the same structure as the game's CPKs</b>. For example, if you wanted to replace the file <span style="background-color: #CCE8FF">data.cpk\model\character\0001\c0001_051_00.GMD</span>, 
			you would make a <span style="background-color: #CCE8FF">mod</span> folder on your comptuer to later serve as the root of the mod.cpk file.
			<br><br>Then, make a <span style="background-color: #CCE8FF">model</span> folder, then a <span style="background-color: #CCE8FF">character</span> folder inside that, then a new folder 
			called <span style="background-color: #CCE8FF">0001</span> inside <i>that,</i> and finally your new GMD file
			that you want the game to load instead (which must also be named <span style="background-color: #CCE8FF">c0001_051_00.GMD</span> to match the original). 
			<br><br>Fortunately, packing that CPK is easy! All you have to do is
			download <a href="http://s15.zetaboards.com/Amicitia/topic/8533150/1"><b>CriPackedFileMaker</b></a> and drag the mod folder containing your matching filesystem onto it.
			Then, make sure you configure it the same as the screenshot on the right.
			Build it, and <a href="https://amicitia.github.io/guides/p5/mod-cpk">follow the Mod Loader</a> tutorial to get your changes working in-game.
			<br>
		</td>
		<td><img src="http://i.imgur.com/JAKpRJy.png"></td>
	</tr>
</table>

</div>

<br><br>

</body>
</html>